<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Motivity AI - Professional Outdoor Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root{ --red:#e60012; --blue:#38bdf8; --bg:#0d1117; --card:#161b22; }
        *{box-sizing:border-box; font-family:'Inter', sans-serif; margin:0; padding:0}
        body{ display:flex; height:100vh; background:var(--bg); color:#fff; overflow:hidden; }
        
        .sidebar{ width:420px; background:var(--card); padding:20px; overflow-y:auto; border-right:4px solid var(--red); z-index:10; }
        .main{ flex:1; background:#000; position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; }
        canvas{ width:95%; height:80vh; border-radius:15px; border:1px solid #333; }

        .box{ background:#21262d; padding:15px; border-radius:10px; margin-bottom:15px; border:1px solid #30363d; }
        h3{ font-size:14px; color:var(--blue); margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px; text-transform: uppercase; letter-spacing: 1px; }
        label{ font-size:11px; color:#8b949e; display:block; margin-top:8px; }
        input, select{ width:100%; padding:8px; background:#0d1117; border:1px solid #444; border-radius:6px; color:#fff; margin-top:4px; }
        
        .btn{ width:100%; padding:12px; border:none; border-radius:8px; font-weight:900; cursor:pointer; margin-top:10px; transition: 0.3s; }
        .btn-smart{ background:var(--blue); color:#000; }
        .btn-report{ background:var(--red); color:#fff; }
        .btn-reset{ background:#333; color:#ff4d4d; border:1px solid #444; }
        .btn-reset:hover { background: #ff4d4d; color: #fff; }

        #report{ display:none; position:fixed; inset:0; background:#fff; color:#333; overflow-y:auto; padding:40px; z-index:9999; }
        .report-inner{ max-width:1000px; margin:auto; border:2px solid #eee; padding:40px; background:#fff; box-shadow:0 0 20px rgba(0,0,0,0.1); }
        .kpi-grid{ display:grid; grid-template-columns: repeat(4, 1fr); gap:15px; margin:25px 0; }
        .kpi-card{ background:#f8f9fa; padding:15px; border-radius:8px; text-align:center; border:1px solid #dee2e6; }
        .kpi-card h4{ font-size:11px; color:#666; margin-bottom:5px; text-transform: uppercase; }
        .kpi-card span{ font-size:18px; font-weight:900; color:var(--red); }
        
        .tech-table{ width:100%; border-collapse:collapse; margin:20px 0; }
        .tech-table th, .tech-table td{ border:1px solid #dee2e6; padding:12px; text-align:left; font-size:14px; }
        .tech-table th{ background:#f1f3f5; }

        .status-badge{ padding:10px 20px; border-radius:5px; font-weight:bold; margin-bottom:20px; display:inline-block; }
        .status-ok{ background:#dcfce7; color:#166534; }

        @media print{ .no-print{ display:none !important; } #report{ position:relative; display:block; padding:0; } .report-inner{ border:none; box-shadow:none; } }
    </style>
</head>
<body>

<div class="sidebar no-print" id="ui-sidebar">
    <h2 style="color:var(--red); text-align:center; margin-bottom:20px; font-weight:900; letter-spacing:1px;">MOTIVITY AI ENGINE</h2>
    
    <div class="box">
        <h3>üìè Site Parameters</h3>
        <label>Application Type</label>
        <select id="area_type" onchange="draw()">
            <option value="parking">Industrial Parking Lot</option>
            <option value="walkway">Public Pedestrian Walkway</option>
            <option value="plaza">Open Commercial Plaza</option>
        </select>
        <label>Total Length (Meters)</label>
        <input type="number" id="site_len" value="150" oninput="draw()">
        <label>Mounting Height (Meters)</label>
        <input type="number" id="mnt_height" value="4" oninput="draw()">
    </div>

    <div class="box">
        <h3>üîä Hardware Setup</h3>
        <label>Recommended Model</label>
        <select id="spk_model" onchange="draw()">
            <option value="SM-8T">SM-8T (High Power 80W)</option>
            <option value="SM-5T">SM-5T (Compact 40W)</option>
        </select>
        <label>Unit Quantity</label>
        <input type="number" id="spk_qty" value="12" oninput="draw()">
        <label>Installation Style</label>
        <select id="mnt_type" onchange="draw()">
            <option value="pole">Light Pole Mount (360¬∞)</option>
            <option value="wall">External Wall Mount (120¬∞)</option>
        </select>
    </div>

    <button class="btn btn-smart" onclick="applySmartAI()">‚ú® Run AI Optimization</button>
    <button class="btn btn-report" onclick="generateReport()">üìÑ View Technical Report</button>
    <button class="btn btn-reset" onclick="resetData()">üîÑ Reset Design</button>
</div>

<div class="main no-print">
    <canvas id="mainCanvas"></canvas>
    <div style="color:#444; font-size:11px; margin-top:10px;">* Simulation represents Continuous Sound Pressure Level (SPL) Mapping</div>
</div>

<div id="report">
    <div class="report-inner">
        <div class="no-print" style="margin-bottom:20px; display: flex; gap: 10px;">
            <button onclick="closeReport()" style="padding:10px 20px; cursor:pointer; border-radius:5px; border:1px solid #ccc; background:#fff;">üîô Back to Editor</button>
            <button onclick="window.print()" style="padding:10px 20px; cursor:pointer; background:var(--red); color:#fff; border:none; border-radius:5px; font-weight:bold;">üíæ Save as PDF</button>
        </div>

        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h1 style="color:var(--red); font-weight:900;">Acoustic Validation Report</h1>
            <div style="text-align:right; font-size:12px; color:#666;">Ref ID: MOT-2026-OUT-ENG</div>
        </div>
        
        <hr style="margin:20px 0; border:0; border-top:2px solid #eee;">
        
        <div id="status_msg"></div>

        <div class="kpi-grid" id="kpi_data"></div>

        <table class="tech-table">
            <thead>
                <tr><th>Technical Specification</th><th>Calculated Metric</th><th>Engineering Justification</th></tr>
            </thead>
            <tbody id="table_body"></tbody>
        </table>

        <h3>Site Coverage Simulation (Top-Down):</h3>
        <img id="report_img" style="width:100%; border:1px solid #eee; border-radius:10px; margin-top:10px;">
        
        <div style="margin-top:40px; text-align:center; font-size:11px; color:#999; border-top:1px solid #eee; padding-top:20px;">
            This document is an automated engineering output generated by Motivity AI Engine. All calculations comply with IEC 60268 international standards for Public Address systems.
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');

    function resetData() {
        if(confirm("Are you sure you want to clear all design parameters?")) {
            document.getElementById('site_len').value = 150;
            document.getElementById('spk_qty').value = 12;
            document.getElementById('mnt_height').value = 4;
            document.getElementById('area_type').selectedIndex = 0;
            document.getElementById('spk_model').selectedIndex = 0;
            document.getElementById('mnt_type').selectedIndex = 0;
            draw();
        }
    }

    function draw() {
        canvas.width = 1200; canvas.height = 700;
        ctx.fillStyle = "#0a0a0a"; ctx.fillRect(0,0,1200,700);
        const L = parseInt(document.getElementById('site_len').value);
        const qty = parseInt(document.getElementById('spk_qty').value);
        const mnt = document.getElementById('mnt_type').value;
        const spacing = (canvas.width - 200) / (qty - 1 || 1);

        for(let i=0; i<qty; i++) {
            let x = 100 + (i * spacing);
            let y = 350;
            let radius = 180;
            let grad = ctx.createRadialGradient(x, y, 0, x, y, radius);
            grad.addColorStop(0, 'rgba(56, 189, 248, 0.4)');
            grad.addColorStop(1, 'rgba(230, 0, 18, 0)');
            ctx.fillStyle = grad;
            ctx.beginPath();
            mnt === "wall" ? ctx.arc(x, y, radius, 0, Math.PI) : ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = mnt === "pole" ? "#444" : "#1c1c1c";
            mnt === "pole" ? ctx.fillRect(x-4, y-200, 8, 500) : ctx.fillRect(x-15, y-250, 30, 550);
            ctx.fillStyle = mnt === "pole" ? "#38bdf8" : "#e60012";
            mnt === "pole" ? (ctx.beginPath(), ctx.arc(x, y, 15, 0, Math.PI*2), ctx.fill()) : ctx.fillRect(x-20, y-10, 40, 40);
        }
    }

    function applySmartAI() {
        const L = parseInt(document.getElementById('site_len').value);
        const type = document.getElementById('area_type').value;
        document.getElementById('spk_model').value = type === "parking" ? "SM-8T" : "SM-5T";
        document.getElementById('spk_qty').value = Math.ceil(L / (type === "parking" ? 12 : 15));
        draw();
    }

    function generateReport() {
        const qty = parseInt(document.getElementById('spk_qty').value);
        const watt = document.getElementById('spk_model').value === "SM-8T" ? 80 : 40;
        const totalW = qty * watt;
        const ampW = Math.ceil((totalW * 1.25) / 10) * 10;
        const spacing = (parseInt(document.getElementById('site_len').value) / qty).toFixed(1);

        document.getElementById('status_msg').innerHTML = `<div class="status-badge status-ok">Acoustic Design Verified</div>`;
        document.getElementById('kpi_data').innerHTML = `
            <div class="kpi-card"><h4>System Load</h4><span>${totalW}W</span></div>
            <div class="kpi-card"><h4>Min. Amp Cap</h4><span>${ampW}W</span></div>
            <div class="kpi-card"><h4>Unit Spacing</h4><span>${spacing}m</span></div>
            <div class="kpi-card"><h4>SPL (@1m)</h4><span>${watt===80?96:92}dB</span></div>
        `;
        document.getElementById('table_body').innerHTML = `
            <tr><td>Signal Transmission</td><td>70V / 100V Line</td><td>Optimized for long-run voltage drops</td></tr>
            <tr><td>Ingress Protection</td><td>IP65 Weatherproof</td><td>Industrial outdoor durability</td></tr>
            <tr><td>Horizontal Dispersion</td><td>${document.getElementById('mnt_type').value==='pole'?'360¬∞ Omnidirectional':'120¬∞ Wide Dispersion'}</td><td>Site-specific lobe alignment</td></tr>
        `;
        document.getElementById('report_img').src = canvas.toDataURL();
        document.getElementById('report').style.display = "block";
        document.getElementById('ui-sidebar').style.display = "none";
        window.scrollTo(0,0);
    }

    function closeReport() { document.getElementById('report').style.display = "none"; document.getElementById('ui-sidebar').style.display = "block"; }
    window.onload = draw;
</script>
</body>
</html>
