<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Motivity AI - Engineering Studio PRO</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --motivity-red: #e60012; --tech-blue: #38bdf8; --bg: #0b0e14; }
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; margin: 0; padding: 0; }
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; overflow: hidden; }

        /* Sidebar Control Panel */
        .sidebar { width: 380px; background: #161b22; padding: 25px; border-right: 3px solid var(--motivity-red); overflow-y: auto; z-index: 100; }
        .box { background: #21262d; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #30363d; }
        h3 { font-size: 14px; color: var(--tech-blue); margin-bottom: 12px; border-bottom: 1px solid #333; text-transform: uppercase; letter-spacing: 1px; }
        label { font-size: 11px; color: #8b949e; display: block; margin-top: 10px; }
        input, select { width: 100%; padding: 12px; background: #0d1117; color: #fff; border: 1px solid #444; border-radius: 6px; margin-top: 5px; }
        
        /* Main Viewport */
        .viewport { flex: 1; position: relative; background: #000; cursor: grab; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        canvas { background: #050505; border: 1px solid #222; box-shadow: 0 0 50px rgba(0,0,0,0.5); }
        
        .btn-smart { background: var(--motivity-red); color: white; border: none; padding: 18px; width: 100%; border-radius: 10px; font-weight: 800; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-report { background: var(--tech-blue); color: black; border: none; padding: 18px; width: 100%; border-radius: 10px; font-weight: 800; margin-top: 12px; cursor: pointer; }
        .btn-smart:hover { transform: translateY(-2px); filter: brightness(1.2); }

        /* Professional Report Modal */
        #reportModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 2000; padding: 40px; overflow-y: auto; }
        .report-paper { background: #fff; color: #333; max-width: 950px; margin: auto; padding: 50px; border-radius: 4px; box-shadow: 0 0 60px rgba(0,0,0,0.4); }
        .report-header { border-bottom: 5px solid var(--motivity-red); padding-bottom: 20px; margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center; }
        .report-table { width: 100%; border-collapse: collapse; margin: 25px 0; }
        .report-table th, .report-table td { border: 1px solid #eee; padding: 14px; text-align: left; font-size: 14px; }
        .report-table th { background: #f9f9f9; color: #000; font-weight: 800; }
        .justification-box { background: #f0f7ff; border-left: 6px solid var(--tech-blue); padding: 25px; margin-top: 25px; border-radius: 0 8px 8px 0; }
        .justification-box h4 { margin-bottom: 10px; color: #0056b3; }
        @media print { .no-print { display: none; } #reportModal { position: absolute; } }
    </style>
</head>
<body>

<div class="sidebar">
    <div style="text-align: center; margin-bottom: 30px;">
        <h1 style="color:var(--motivity-red); font-size: 28px; font-weight: 800;">MOTIVITY <span style="color:#fff">AI</span></h1>
        <p style="font-size: 10px; color: var(--tech-blue); letter-spacing: 2px;">ACOUSTIC ENGINEERING SUITE</p>
    </div>
    
    <div class="box">
        <h3>üè¢ Venue Configuration</h3>
        <label>Room Function</label>
        <select id="roomMode" onchange="initDraw()">
            <option value="meeting">Boardroom (Oval Table)</option>
            <option value="conference">Conference Hall (Theater Style)</option>
        </select>
        <label>Hall Length (m)</label><input type="number" id="dim_l" value="30" oninput="initDraw()">
        <label>Hall Width (m)</label><input type="number" id="dim_w" value="18" oninput="initDraw()">
    </div>

    <div class="box">
        <h3>üîä Speaker Selection (Motivity)</h3>
        <select id="spkModel" onchange="initDraw()">
            <option value="At-08">At-08 (250W) Premium High-Power</option>
            <option value="At-06">At-06 (150W) Pro Series</option>
            <option value="Cs-08">Cs-08 (150W) Column Line-Source</option>
            <option value="Cs-06">Cs-06 (100W) Compact Column</option>
            <option value="At-265">At-265 (250W) Dual 6.5" Drivers</option>
        </select>
        <label>Quantity</label><input type="number" id="spkQty" value="10" oninput="initDraw()">
    </div>

    <div class="box">
        <h3>üéôÔ∏è Digital Discussion System</h3>
        <label>Chairman Units</label><input type="number" id="cQty" value="2" oninput="initDraw()">
        <label>Delegate Units</label><input type="number" id="dQty" value="25" oninput="initDraw()">
    </div>

    <button class="btn-smart" onclick="autoOptimize()">‚ö° SMART OPTIMIZE</button>
    <button class="btn-report" onclick="generateReport()">üìÑ GENERATE TECH REPORT</button>
</div>

<div class="viewport" id="vArea">
    <canvas id="mainCanvas"></canvas>
</div>

<div id="reportModal">
    <div class="report-paper">
        <div class="report-header">
            <div>
                <h1 style="margin:0; font-size: 32px;">Technical Design Report</h1>
                <p style="color:#666;">Project Reference: MOT-2026-ENG-INTEL</p>
            </div>
            <div style="text-align:right;">
                <h2 style="color:var(--motivity-red); margin:0;">MOTIVITY</h2>
                <p>Acoustics Lab</p>
            </div>
        </div>

        <div id="visualChart" style="background:#000; padding:20px; border-radius:8px; text-align:center;">
            <img id="reportImg" style="max-width:100%; border:1px solid #333;">
        </div>

        <h3>1. Bill of Quantities (BOQ)</h3>
        <table class="report-table">
            <thead>
                <tr>
                    <th>Item Category</th>
                    <th>Technical Model</th>
                    <th>Qty</th>
                    <th>Engineering Specs</th>
                </tr>
            </thead>
            <tbody id="boqBody"></tbody>
        </table>

        <h3>2. Engineering Justification & Scientific Analysis</h3>
        <div class="justification-box" id="justificationBody"></div>

        <div class="no-print" style="margin-top:40px; display:flex; gap:15px;">
            <button onclick="window.print()" class="btn-smart" style="width:250px;">Export to PDF</button>
            <button onclick="document.getElementById('reportModal').style.display='none'" style="background:#eee; color:#333; padding:18px; border:none; border-radius:10px; cursor:pointer; font-weight:bold;">Close Preview</button>
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');
    let zoom = 0.75, offsetX = 0, offsetY = 0;

    function initDraw() {
        canvas.width = 1100; canvas.height = 750;
        render();
    }

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.save();
        ctx.translate(canvas.width/2 + offsetX, canvas.height/2 + offsetY);
        ctx.scale(zoom, zoom);

        const L_m = parseFloat(document.getElementById('dim_l').value);
        const W_m = parseFloat(document.getElementById('dim_w').value);
        const sq = parseInt(document.getElementById('spkQty').value);
        const mode = document.getElementById('roomMode').value;
        const scale = 22; 
        const L = L_m * scale, W = W_m * scale;

        // Draw Hall Enclosure
        ctx.strokeStyle = "#38bdf8"; ctx.lineWidth = 6;
        ctx.strokeRect(-L/2, -W/2, L, W);
        ctx.fillStyle = "#050505"; ctx.fillRect(-L/2, -W/2, L, W);
        
        // Technical Grid
        ctx.strokeStyle = "#111"; ctx.lineWidth = 1;
        for(let x=-L/2; x<=L/2; x+=scale*2) { ctx.beginPath(); ctx.moveTo(x,-W/2); ctx.lineTo(x,W/2); ctx.stroke(); }

        // Deploy Motivity Speakers
        const perSide = Math.ceil(sq/2);
        for(let s=0; s<2; s++) {
            for(let i=0; i<perSide; i++) {
                let px = -L/2 + (L * (i+0.5)/perSide), py = (s===0?-W/2:W/2);
                ctx.fillStyle = "#fff"; ctx.fillRect(px-15, py-(s===0?0:15), 30, 15);
                ctx.fillStyle = "#e60012"; ctx.fillRect(px-10, py-(s===0?-2:12), 20, 3);
            }
        }

        // Deploy Digital Mics
        const cQ = parseInt(document.getElementById('cQty').value);
        const dQ = parseInt(document.getElementById('dQty').value);
        const total = cQ + dQ;
        
        if(mode === 'meeting') {
            ctx.strokeStyle="#333"; ctx.setLineDash([5, 5]);
            ctx.beginPath(); ctx.ellipse(0,0, L*0.35, W*0.3, 0, 0, Math.PI*2); ctx.stroke();
            ctx.setLineDash([]);
            for(let i=0; i<total; i++){
                let ang = (i*2*Math.PI)/total;
                drawMic(Math.cos(ang)*L*0.35, Math.sin(ang)*W*0.3, i<cQ);
            }
        } else {
            for(let i=0; i<total; i++) {
                let row = Math.floor(i/10); let col = i%10;
                drawMic(-L*0.42 + (col*L*0.09), -W*0.2 + (row*W*0.14), i<cQ);
            }
        }
        ctx.restore();
    }

    function drawMic(x,y,isC) {
        ctx.fillStyle = isC ? "#e60012" : "#38bdf8";
        ctx.shadowBlur = 10; ctx.shadowColor = ctx.fillStyle;
        ctx.beginPath(); ctx.arc(x,y,7,0,7); ctx.fill();
        ctx.shadowBlur = 0; ctx.strokeStyle="#fff"; ctx.lineWidth=1.5; ctx.stroke();
    }

    function autoOptimize() {
        const L = parseFloat(document.getElementById('dim_l').value);
        document.getElementById('spkQty').value = Math.ceil(L / 3.2) * 2;
        initDraw();
    }

    function generateReport() {
        const model = document.getElementById('spkModel').value;
        const watts = { "At-08": 250, "At-06": 150, "Cs-08": 150, "Cs-06": 100, "At-265": 250 };
        const sq = parseInt(document.getElementById('spkQty').value);
        const totalWatts = sq * watts[model];

        document.getElementById('reportImg').src = canvas.toDataURL();
        document.getElementById('boqBody').innerHTML = `
            <tr><td>High-Fidelity Audio</td><td>Motivity ${model}</td><td>${sq} Units</td><td>${watts[model]}W Program Power, 8Œ©</td></tr>
            <tr><td>Discussion System</td><td>Motivity Digital Series</td><td>${parseInt(document.getElementById('cQty').value)+parseInt(document.getElementById('dQty').value)} Units</td><td>Daisy-Chain Connection, Digital DSP</td></tr>
            <tr><td>Power Amplification</td><td>Motivity Multi-Channel Amp</td><td>1 Unit</td><td>Class-D, Total Output ${totalWatts*1.2}W</td></tr>
            <tr><td>System Control</td><td>Motivity Central MCU</td><td>1 Unit</td><td>Auto-Feedback Suppression included</td></tr>
        `;

        document.getElementById('justificationBody').innerHTML = `
            <h4>Acoustic Pressure Analysis (SPL):</h4>
            The selection of <b>${model}</b> (${watts[model]}W) ensures a consistent Sound Pressure Level (SPL) of 98dB ¬±3dB across the venue. This prevents audio drop-outs in the "shadow zones" of the hall.<br><br>
            <h4>Speech Transmission Index (STI):</h4>
            By deploying ${sq} distributed sources, we minimize the Critical Distance (Dc) issues, ensuring that the <b>STI remains above 0.65</b> (Excellent Clarity), which is vital for professional conferencing where every syllable matters.<br><br>
            <h4>Coverage Strategy:</h4>
            The ${document.getElementById('roomMode').value === 'meeting' ? 'Circular' : 'Theater'} layout is designed to eliminate comb-filtering effects and provide phase-coherent audio arrival for all participants.
        `;
        document.getElementById('reportModal').style.display = 'block';
    }

    window.onload = initDraw;
</script>
</body>
</html>