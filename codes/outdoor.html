<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Motivity AI - Final Outdoor Master</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root{ --motivity-red:#e60012; --tech-blue:#38bdf8; --bg:#0d1117; }
        *{box-sizing:border-box; font-family:'Cairo', sans-serif; margin:0; padding:0}
        body{background:var(--bg); color:#fff; display:flex; height:100vh; overflow:hidden}
        .sidebar{width:450px; background:#161b22; padding:20px; overflow-y:auto; border-left:4px solid var(--motivity-red); flex-shrink:0}
        .box{background:#21262d; padding:15px; border-radius:10px; margin-bottom:12px; border:1px solid #30363d}
        h3{font-size:14px; color:var(--tech-blue); border-bottom:1px solid #444; padding-bottom:5px; margin-bottom:10px}
        label{font-size:11px; color:#8b949e; display:block; margin-top:8px}
        input, select{width:100%; padding:10px; background:#0d1117; color:#fff; border:1px solid #444; border-radius:6px; margin-top:4px}
        .main-view{flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; background:#000}
        canvas{background:#0a0a0a; border:1px solid #333; border-radius:15px; width:95%; height:75vh}
        .btn-smart{background:var(--tech-blue); color:#000; width:100%; padding:12px; border:none; border-radius:6px; font-weight:900; cursor:pointer; margin:10px 0}
        .btn-report{background:var(--motivity-red); color:#fff; width:100%; padding:15px; border:none; border-radius:8px; font-weight:900; cursor:pointer}
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„ØªÙ‚Ø±ÙŠØ± */
        #reportPage{display:none; position:fixed; inset:0; background:#fff; z-index:9999; color:#333; overflow-y:auto; padding:40px}
        .report-content{max-width:1100px; margin:auto; padding:30px; border:1px solid #ddd; background:#fff}
        .no-print-btn{padding:10px 25px; border-radius:5px; cursor:pointer; font-weight:bold; border:none; margin-left:10px}
        table{width:100%; border-collapse:collapse; margin:20px 0}
        th, td{border:1px solid #ddd; padding:12px; text-align:right}
        @media print { .no-print { display: none !important; } #reportPage { position: static; display: block; } }
    </style>
</head>
<body>

<div class="sidebar no-print" id="ui-sidebar">
    <h2 style="color:var(--motivity-red); text-align:center; margin-bottom:15px">Ù…Ø­Ø±Ùƒ MOTIVITY Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ</h2>
    
    <div class="box">
        <h3>ğŸ“ ØªÙˆØµÙŠÙ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</h3>
        <label>Ù†ÙˆØ¹ Ø§Ù„Ù…ÙƒØ§Ù†</label>
        <select id="area_type">
            <option value="parking">Ù…ÙˆØ§Ù‚Ù Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ…Ø¯Ø§Ø®Ù„</option>
            <option value="path">Ù…Ù…Ø±Ø§Øª ÙˆÙ…Ø¸Ù„Ø§Øª</option>
        </select>
        <label>Ø·ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© (Ù…ØªØ±)</label>
        <input type="number" id="area_len" value="100" oninput="draw()">
        <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ«Ø¨ÙŠØª</label>
        <select id="mount" onchange="draw()">
            <option value="wall">ØªØ«Ø¨ÙŠØª Ø­Ø§Ø¦Ø·ÙŠ</option>
            <option value="pole">Ø£Ø¹Ù…Ø¯Ø© Ø¥Ù†Ø§Ø±Ø©/ØµÙˆØª</option>
        </select>
    </div>

    <div class="box">
        <h3>ğŸ”Š Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠ</h3>
        <label>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</label>
        <select id="model">
            <option value="SM-8T">SM-8T (80W)</option>
            <option value="SM-5T">SM-5T (40W)</option>
        </select>
        <label>Ø§Ù„Ø¹Ø¯Ø¯</label>
        <input type="number" id="qty" value="10" oninput="draw()">
    </div>

    <button class="btn-smart" onclick="applySmart()">âœ¨ Ø§Ù‚ØªØ±Ø§Ø­ Ø°ÙƒÙŠ</button>
    <button class="btn-report" onclick="openReport()">ğŸ“„ Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„</button>
</div>

<div class="main-view no-print">
    <canvas id="outdoorCanvas"></canvas>
</div>

<div id="reportPage">
    <div class="report-content">
        <div class="no-print" style="margin-bottom:25px">
            <button onclick="closeReport()" class="no-print-btn" style="background:#666; color:#fff">ğŸ”™ Ø±Ø¬ÙˆØ¹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</button>
            <button onclick="window.print()" class="no-print-btn" style="background:var(--motivity-red); color:#fff">ğŸ’¾ Ø­ÙØ¸ PDF</button>
        </div>
        <h1 style="color:var(--motivity-red)">ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙ†ÙŠ Ù„Ù„Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø©</h1>
        <div id="smartReasoning" style="background:#f4f7f6; padding:25px; border-right:6px solid var(--motivity-red); margin:20px 0; font-size:16px; line-height:1.7"></div>
        <table id="resTable"></table>
        <h3>Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ Ù„Ù„ØªÙˆØ²ÙŠØ¹:</h3>
        <img id="resImg" style="width:100%; border:2px solid #eee; margin-top:10px">
    </div>
</div>

<script>
    const canvas = document.getElementById('outdoorCanvas');
    const ctx = canvas.getContext('2d');

    function draw() {
        const mnt = document.getElementById('mount').value;
        const q = parseInt(document.getElementById('qty').value) || 1;
        canvas.width = 1200; canvas.height = 700;
        
        ctx.fillStyle = "#0a0a0a"; ctx.fillRect(0,0,1200,700);
        
        // Ø±Ø³Ù… Ø®Ø· Ø§Ù„Ø£Ø±Ø¶ÙŠØ©
        ctx.strokeStyle = "#333"; ctx.lineWidth = 2;
        ctx.beginPath(); ctx.moveTo(50, 600); ctx.lineTo(1150, 600); ctx.stroke();

        const spacing = 1000 / q;
        for(let i=0; i<q; i++) {
            let x = 100 + (i * spacing);
            
            if(mnt === "wall") {
                // Ø±Ø³Ù… Ø§Ù„Ø­Ø§Ø¦Ø· Ø¨Ø¬ÙˆØ¯Ø© Ø£ÙØ¶Ù„
                ctx.fillStyle = "#1c1c1c"; ctx.fillRect(x-15, 100, 30, 500);
                ctx.strokeStyle = "#444"; ctx.strokeRect(x-15, 100, 30, 500);
                // Ø§Ù„Ø³Ù…Ø§Ø¹Ø© SM
                ctx.fillStyle = "#e60012"; ctx.fillRect(x-20, 200, 40, 55);
                ctx.fillStyle = "#fff"; ctx.font = "bold 10px Cairo"; ctx.fillText("SM", x-10, 235);
            } else {
                // Ø±Ø³Ù… Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©
                ctx.fillStyle = "#555"; ctx.fillRect(x-3, 100, 6, 500);
                ctx.fillStyle = "#222"; ctx.fillRect(x-15, 590, 30, 10);
                // Ø§Ù„Ø³Ù…Ø§Ø¹Ø© Ø¯Ø§Ø¦Ø±ÙŠØ© Ù„Ù„Ø¹Ù…ÙˆØ¯
                ctx.fillStyle = "#38bdf8"; ctx.beginPath(); ctx.arc(x, 200, 20, 0, Math.PI*2); ctx.fill();
                ctx.strokeStyle = "#fff"; ctx.stroke();
            }
        }
    }

    function applySmart() {
        const type = document.getElementById('area_type').value;
        if(type === "parking") {
            document.getElementById('model').value = "SM-8T";
            document.getElementById('qty').value = 12;
        } else {
            document.getElementById('model').value = "SM-5T";
            document.getElementById('qty').value = 8;
        }
        draw();
    }

    function openReport() {
        const typeTxt = document.getElementById('area_type').options[document.getElementById('area_type').selectedIndex].text;
        const mod = document.getElementById('model').value;
        const q = document.getElementById('qty').value;
        const amp = (mod === "SM-8T") ? "MA-360P5P" : "MA-240P5P";

        // Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ„
        let reason = `<h3>ğŸ› ï¸ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ:</h3>`;
        reason += `<p>â€¢ <strong>Ø§Ù„Ù…ÙƒØ§Ù†:</strong> ØªÙ… ØªØ­Ù„ÙŠÙ„ Ù…Ø³Ø§Ø­Ø© (${typeTxt}) Ø¨Ø·ÙˆÙ„ ${document.getElementById('area_len').value} Ù…ØªØ±.</p>`;
        reason += `<p>â€¢ <strong>Ø§Ù„ØªØ¹Ù„ÙŠÙ„ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ:</strong> Ø§Ø®ØªÙŠØ§Ø± <strong>${mod}</strong> ÙŠØ¶Ù…Ù† ØªØºØ·ÙŠØ© ØµÙˆØªÙŠØ© Ù…ØªÙŠÙ†Ø© Ø¨ÙØ¶Ù„ ØªØµÙ…ÙŠÙ…Ù‡Ø§ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„Ø¬ÙˆÙŠØ© ÙˆØ­Ø³Ø§Ø³ÙŠØªÙ‡Ø§ Ø§Ù„Ø¹Ø§Ù„ÙŠØ© (${mod === 'SM-8T' ? '89dB' : '87dB'}).</p>`;
        reason += `<p>â€¢ <strong>Ù†Ø¸Ø§Ù… Ø§Ù„Ø·Ø§Ù‚Ø©:</strong> ØªÙ… ØªØ®ØµÙŠØµ Ù…ÙƒØ¨Ø± <strong>${amp}</strong> Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù…Ù„ Ø§Ù„ÙƒÙ„ÙŠ Ø¹Ø¨Ø± 5 Ù…Ù†Ø§Ø·Ù‚ Ù…Ø³ØªÙ‚Ù„Ø©.</p>`;
        
        document.getElementById('smartReasoning').innerHTML = reason;

        // Ø§Ù„Ø¬Ø¯ÙˆÙ„
        let table = `<tr><th>Ø§Ù„Ù…ÙˆØ§ØµÙØ©</th><th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th></tr>
                    <tr><td>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</td><td>${typeTxt}</td></tr>
                    <tr><td>Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø³Ù…Ø§Ø¹Ø©</td><td>${mod}</td></tr>
                    <tr><td>Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„ÙŠ</td><td>${q}</td></tr>
                    <tr><td>Ø§Ù„Ù…ÙƒØ¨Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­</td><td>${amp}</td></tr>`;
        
        document.getElementById('resTable').innerHTML = table;
        document.getElementById('resImg').src = canvas.toDataURL();
        
        document.getElementById('reportPage').style.display = 'block';
        document.getElementById('ui-sidebar').style.display = 'none';
    }

    function closeReport() {
        document.getElementById('reportPage').style.display = 'none';
        document.getElementById('ui-sidebar').style.display = 'block';
    }

    window.onload = draw;
</script>
</body>
</html>