 
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Motivity AI - Final Mosque Edition</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root{ --motivity-red:#e60012; --tech-blue:#38bdf8; --bg:#0d1117; }
*{box-sizing:border-box; font-family:'Cairo', sans-serif; margin:0; padding:0}
body{background:var(--bg); color:#fff; display:flex; flex-direction:column; height:100vh; overflow:hidden}

.wrapper{display:flex; flex:1; overflow:hidden; flex-direction: row;}
@media (max-width: 992px) { .wrapper { flex-direction: column; overflow-y: auto; } .sidebar { width: 100% !important; border-bottom:5px solid var(--motivity-red); } .canvas-container { min-height: 400px; } }

.sidebar{width:400px; background:#161b22; padding:20px; overflow-y:auto; border-left:4px solid var(--motivity-red); flex-shrink: 0;}
.box{background:#21262d; padding:15px; border-radius:12px; margin-bottom:15px; border:1px solid #30363d}
h2 span{color:var(--motivity-red)}
label{font-size:12px; color:#8b949e; display:block; margin-top:10px}
input, select{width:100%; padding:12px; background:#0d1117; color:#fff; border:1px solid #30363d; border-radius:8px; font-size:14px; margin-top:5px}

button{width:100%; padding:14px; border:none; border-radius:8px; font-weight:700; cursor:pointer; margin-top:10px; transition:0.3s}
.btn-primary{background:var(--motivity-red); color:#fff}
.btn-secondary{background:var(--tech-blue); color:#000}
.btn-outline{background:transparent; border:1px solid #444; color:#ccc}

.canvas-container{flex:1; position:relative; background:#000; overflow:hidden; display:flex; align-items:center; justify-content:center}
canvas{max-width:95%; max-height:95%; border:1px solid #222; cursor: crosshair; background:#0a0a0a}

#reportView{display:none; position:fixed; inset:0; background:#f4f4f4; color:#333; z-index:9999; padding:20px; overflow-y:auto}
.paper{max-width:900px; margin:auto; background:#fff; padding:40px; box-shadow:0 0 30px rgba(0,0,0,0.2); border-top:10px solid var(--motivity-red)}
.header{display:flex; justify-content:space-between; border-bottom:2px solid #eee; padding-bottom:20px; margin-bottom:20px}
.table-boq{width:100%; border-collapse:collapse; margin:20px 0}
.table-boq th, .table-boq td{border:1px solid #eee; padding:15px; text-align:right}
.table-boq th{background:#fafafa; font-weight:900}
</style>
</head>
<body>

<div class="wrapper no-print">
    <div class="sidebar">
        <h2>MOTIVITY <span>AI DESIGNER</span></h2>
        
        <div class="box">
            <h3>ğŸ“ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø§Ø±ØªÙØ§Ø¹</h3>
            <div style="display:flex; gap:10px">
                <div><label>Ø§Ù„Ø·ÙˆÙ„ (Ù…)</label><input type="number" id="m_len" value="30" oninput="draw()"></div>
                <div><label>Ø§Ù„Ø¹Ø±Ø¶ (Ù…)</label><input type="number" id="m_wid" value="15" oninput="draw()"></div>
            </div>
            <label>Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³Ù‚Ù (Ù…)</label>
            <input type="number" id="m_h" value="6" oninput="draw()">
        </div>

        <div class="box">
            <h3>ğŸ”Š Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ²ÙŠØ¹</h3>
            <label>Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø³Ù…Ø§Ø¹Ø©</label>
            <select id="m_model" onchange="draw()">
                <option value="CS-08 (High Power Column)">Motivity CS-08 Column</option>
                <option value="CS-06 (Slim Column)">Motivity CS-06 Column</option>
                <option value="AT-265 (Pro Column)">Motivity AT-265 Column</option>
                <option value="AT-08 (Wall 8 inch)">Motivity AT-08 Wall</option>
                <option value="AT-06 (Wall 6 inch)">Motivity AT-06 Wall</option>
            </select>
            <label>ÙƒÙ…ÙŠØ© Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©</label>
            <input type="number" id="m_qty" value="4">
            
            <button class="btn-secondary" onclick="addParallelSpeakers()">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©</button>
            <button class="btn-outline" onclick="aiSmartDistribute()" style="border-color:var(--tech-blue); color:var(--tech-blue)">âœ¨ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø°ÙƒÙŠ</button>
            <button class="btn-outline" onclick="speakers=[]; draw()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù…Ø®Ø·Ø·</button>
        </div>
        
        <button class="btn-primary" onclick="generateFullReport()">ğŸ“„ Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙˆØ§Ù„Ù€ BOQ</button>
    </div>

    <div class="canvas-container">
        <canvas id="mosqueCanvas" onclick="handleInput(event)"></canvas>
    </div>
</div>

<div id="reportView">
    <div class="paper">
        <div class="header">
            <div><h1 style="color:var(--motivity-red)">MOTIVITY AUDIO</h1><p>Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</p></div>
            <div style="text-align:left"><p>Ø§Ù„ØªØ§Ø±ÙŠØ®: 2026-01-16</p><p>Ø§Ù„Ù…Ø±Ø¬Ø¹: MOT-PRO-CS8</p></div>
        </div>
        <h3>Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„ØµÙˆØªÙŠ:</h3>
        <div style="background:#000; padding:20px; text-align:center; border-radius:10px">
            <img id="reportImg" style="max-width:100%">
        </div>
        <h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª (BOQ):</h3>
        <table class="table-boq"><tbody id="boq-list"></tbody></table>
        <div class="no-print" style="margin-top:40px; text-align:center; display:flex; gap:10px; justify-content:center">
            <button onclick="window.print()" class="btn-primary" style="width:200px">Ø·Ø¨Ø§Ø¹Ø©</button>
            <button onclick="document.getElementById('reportView').style.display='none'" style="background:#333; color:#fff; width:100px; border-radius:8px; border:none; cursor:pointer">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
</div>

<script>
const canvas = document.getElementById('mosqueCanvas');
const ctx = canvas.getContext('2d');
let speakers = []; 

function draw() {
    const parent = canvas.parentElement;
    canvas.width = parent.clientWidth * 0.95;
    canvas.height = parent.clientHeight * 0.95;
    const scale = Math.min(canvas.width / 50, canvas.height / 50);
    const W = document.getElementById('m_wid').value * scale;
    const L = document.getElementById('m_len').value * scale;
    const x0 = (canvas.width - W) / 2;
    const y0 = (canvas.height - L) / 2;

    ctx.fillStyle = "#0a0a0a"; ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.strokeStyle = "#38bdf8"; ctx.lineWidth = 4;
    ctx.strokeRect(x0, y0, W, L);

    ctx.fillStyle = "#38bdf8";
    ctx.beginPath(); ctx.arc(x0 + W/2, y0, scale*1.5, Math.PI, 0); ctx.fill();

    const modelLabel = document.getElementById('m_model').value.split(' ')[0];
    speakers.forEach((s, i) => {
        const px = x0 + (s.rx * W); const py = y0 + (s.ry * L);
        ctx.fillStyle = "#e60012"; ctx.beginPath(); ctx.arc(px, py, scale/2, 0, Math.PI*2); ctx.fill();
        ctx.fillStyle = "#fff"; ctx.font = `bold ${scale/2.5}px Cairo`; ctx.textAlign = "center";
        ctx.fillText(`${modelLabel}-S${i+1}`, px, py - 12);
    });
    window.lastLayout = {x0, y0, W, L, scale};
}

function handleInput(e) {
    const rect = canvas.getBoundingClientRect();
    const {x0, y0, W, L} = window.lastLayout;
    const rx = ((e.clientX - rect.left) - x0) / W < 0.5 ? 0 : 1;
    const ry = ((e.clientY - rect.top) - y0) / L;
    if(ry >= 0 && ry <= 1) { speakers.push({rx, ry}, {rx: rx===0?1:0, ry}); draw(); }
}

function addParallelSpeakers() {
    const pairs = parseInt(document.getElementById('m_qty').value);
    speakers = [];
    const step = 1 / (pairs + 1);
    for(let i=1; i<=pairs; i++) { speakers.push({rx: 0, ry: i * step}, {rx: 1, ry: i * step}); }
    draw();
}

function aiSmartDistribute() {
    const length = parseFloat(document.getElementById('m_len').value);
    document.getElementById('m_qty').value = Math.max(2, Math.floor(length / 6));
    addParallelSpeakers();
}

function generateFullReport() {
    const model = document.getElementById('m_model').value;
    document.getElementById('reportImg').src = canvas.toDataURL();
    document.getElementById('boq-list').innerHTML = `
        <tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th></tr>
        <tr><td>Ø³Ù…Ø§Ø¹Ø§Øª</td><td>Motivity ${model}</td><td>${speakers.length} ÙˆØ­Ø¯Ø©</td></tr>
        <tr><td>Ù…Ø¶Ø®Ù… ØµÙˆØª</td><td>Motivity Professional Amp</td><td>1 ÙˆØ­Ø¯Ø©</td></tr>
        <tr><td>Ù…ÙƒØ³Ø±</td><td>Motivity Audio Mixer</td><td>1 ÙˆØ­Ø¯Ø©</td></tr>
    `;
    document.getElementById('reportView').style.display = 'block';
}

window.onresize = draw; window.onload = draw;
</script>
</body>
</html>