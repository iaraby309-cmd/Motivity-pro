<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOTIVITY AI - Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#e60012">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --motivity-red: #e60012; --dark-bg: #0a0c10; --tech-blue: #38bdf8; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: 'Cairo', sans-serif; background: var(--dark-bg); color: white; }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù‡ÙˆØ§ØªÙ */
        #loginOverlay { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .login-box { width: 100%; max-width: 350px; text-align: center; border: 1px solid var(--motivity-red); padding: 40px 20px; border-radius: 15px; background: #161b22; box-shadow: 0 0 30px rgba(230,0,18,0.4); }
        .login-box input { padding: 12px; width: 90%; border-radius: 8px; border: 1px solid #333; margin: 15px 0; text-align: center; background: #0d1117; color: white; font-size: 1.1em; outline: none; }
        
        #mainNav { background: #161b22; padding: 10px; display: none; overflow-x: auto; white-space: nowrap; border-bottom: 3px solid var(--motivity-red); position: relative; scrollbar-width: none; }
        #mainNav::-webkit-scrollbar { display: none; } /* Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± ÙÙŠ Ø§Ù„Ù‡ÙˆØ§ØªÙ */
        
        #mainNav button { background: #21262d; color: #fff; border: 1px solid #30363d; padding: 10px 20px; margin: 0 5px; cursor: pointer; border-radius: 8px; font-weight: bold; transition: 0.3s; font-size: 14px; }
        #mainNav button.active { background: var(--motivity-red); border-color: #fff; transform: scale(1.05); }
        
        #contentArea { height: calc(100vh - 65px); width: 100%; display: none; position: relative; }
        iframe { width: 100%; height: 100%; border: none; background: #000; }
        
        .section-label { color: #8b949e; font-size: 11px; margin: 0 10px; text-transform: uppercase; letter-spacing: 1px; }
        
        /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .top-controls { display: inline-flex; gap: 5px; margin-left: 20px; }
        .lang-switch { background: #fff !important; color: #000 !important; }
        .logout-btn { background: #333 !important; color: #fff !important; border: 1px solid var(--motivity-red) !important; }
    </style>
</head>
<body>

<div id="loginOverlay">
    <div class="login-box">
        <h1 style="color:var(--motivity-red); font-weight:900; letter-spacing:2px; margin:0;">MOTIVITY AI</h1>
        <p style="color:#8b949e; margin-bottom:15px;">Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</p>
        <input type="password" id="passCode" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"> <br>
        <button onclick="unlock()" style="background:var(--motivity-red); color:white; border:none; padding:12px 50px; border-radius:8px; cursor:pointer; font-weight:bold; font-size:1.1em; width: 90%;">Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<nav id="mainNav">
    <div class="top-controls">
        <button class="lang-switch" onclick="location.href='index_en.html'">English</button>
        <button class="logout-btn" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
    </div>
    
    <span class="section-label">Ø§Ù„Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ù…ØºÙ„Ù‚Ø©:</span>
    <button onclick="switchTab('mosque')" id="btn-mosque">ğŸ•Œ Ø§Ù„Ù…Ø³Ø§Ø¬Ø¯</button>
    <button onclick="switchTab('ceiling')" id="btn-ceiling">ğŸ¢ Ø§Ù„ÙÙ†Ø§Ø¯Ù‚</button>
    <button onclick="switchTab('meeting')" id="btn-meeting">ğŸ¤ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª</button>
    <button onclick="switchTab('party')" id="btn-party">ğŸ‰ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª</button>
    
    <span class="section-label">| Ø§Ù„Ù…ÙØªÙˆØ­Ø©:</span>
    <button onclick="switchTab('outdoor')" id="btn-outdoor">ğŸ…¿ï¸ Ø§Ù„Ù…ÙˆØ§Ù‚Ù</button>
    <button onclick="switchTab('concert')" id="btn-concert">ğŸ¸ Ø§Ù„Ø­ÙÙ„Ø§Øª</button>
    <button onclick="switchTab('garden')" id="btn-garden">ğŸŒ³ Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚</button>
</nav>

<div id="contentArea">
    <iframe id="mainFrame" name="mainFrame"></iframe>
</div>

<script>
    const SECRET = "1234";

    // ØªÙØ¹ÙŠÙ„ PWA Service Worker
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
            .then(reg => console.log('Tack! PWA Active'))
            .catch(err => console.log('PWA Error', err));
        });
    }

    function unlock() {
        if(document.getElementById('passCode').value === SECRET) {
            localStorage.setItem('motivity_auth', 'true');
            showApp();
        } else { 
            alert("âš ï¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©!"); 
        }
    }

    function logout() {
        if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ")) {
            localStorage.removeItem('motivity_auth');
            location.reload();
        }
    }

    function showApp() {
        document.getElementById('loginOverlay').style.display = 'none';
        document.getElementById('mainNav').style.display = 'block';
        document.getElementById('contentArea').style.display = 'block';
        // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø¢Ø®Ø± ØªØ¨ÙˆÙŠØ¨ ÙƒØ§Ù† Ù…ÙØªÙˆØ­Ø§Ù‹
        const lastTab = localStorage.getItem('lastTab') || 'mosque';
        switchTab(lastTab);
    }

    function switchTab(tabId) {
        const buttons = document.querySelectorAll('#mainNav button:not(.lang-switch):not(.logout-btn)');
        buttons.forEach(btn => btn.classList.remove('active'));
        
        const targetBtn = document.getElementById('btn-' + tabId);
        if(targetBtn) targetBtn.classList.add('active');
        
        // Ø­ÙØ¸ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        localStorage.setItem('lastTab', tabId);
        document.getElementById('mainFrame').src = "ar_codes/" + tabId + ".html";
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
    window.onload = function() {
        if(localStorage.getItem('motivity_auth') === 'true') {
            showApp();
        }
    };

    document.getElementById('passCode').addEventListener("keyup", function(e) { 
        if (e.key === "Enter") unlock(); 
    });
</script>
</body>
</html>
