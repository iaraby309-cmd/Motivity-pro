<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Motivity AI - Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ù…Ù‡Ù†ÙŠ Ù„Ù„Ù…Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root{ --red:#e60012; --blue:#38bdf8; --bg:#0d1117; --card:#161b22; }
        *{box-sizing:border-box; font-family:'Cairo', sans-serif; margin:0; padding:0}
        body{ display:flex; height:100vh; background:var(--bg); color:#fff; overflow:hidden; }
        
        .sidebar{ width:420px; background:var(--card); padding:20px; overflow-y:auto; border-left:4px solid var(--red); z-index:10; }
        .main{ flex:1; background:#000; position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; }
        canvas{ width:95%; height:80vh; border-radius:15px; border:1px solid #333; }

        .box{ background:#21262d; padding:15px; border-radius:10px; margin-bottom:15px; border:1px solid #30363d; }
        h3{ font-size:14px; color:var(--blue); margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px; font-weight:900; }
        label{ font-size:12px; color:#8b949e; display:block; margin-top:8px; }
        input, select{ width:100%; padding:8px; background:#0d1117; border:1px solid #444; border-radius:6px; color:#fff; margin-top:4px; }
        
        .btn{ width:100%; padding:12px; border:none; border-radius:8px; font-weight:900; cursor:pointer; margin-top:10px; transition: 0.3s; font-family: 'Cairo'; }
        .btn-smart{ background:var(--blue); color:#000; }
        .btn-report{ background:var(--red); color:#fff; }
        .btn-reset{ background:#333; color:#ff4d4d; border:1px solid #444; }
        .btn-reset:hover { background: #ff4d4d; color: #fff; }

        #report{ display:none; position:fixed; inset:0; background:#fff; color:#333; overflow-y:auto; padding:40px; z-index:9999; }
        .report-inner{ max-width:1000px; margin:auto; border:2px solid #eee; padding:40px; background:#fff; box-shadow:0 0 20px rgba(0,0,0,0.1); }
        .kpi-grid{ display:grid; grid-template-columns: repeat(4, 1fr); gap:15px; margin:25px 0; }
        .kpi-card{ background:#f8f9fa; padding:15px; border-radius:8px; text-align:center; border:1px solid #dee2e6; }
        .kpi-card h4{ font-size:12px; color:#666; margin-bottom:5px; }
        .kpi-card span{ font-size:18px; font-weight:900; color:var(--red); }
        
        .tech-table{ width:100%; border-collapse:collapse; margin:20px 0; }
        .tech-table th, .tech-table td{ border:1px solid #dee2e6; padding:12px; text-align:right; font-size:14px; }
        .tech-table th{ background:#f1f3f5; }

        .status-badge{ padding:10px 20px; border-radius:5px; font-weight:bold; margin-bottom:20px; display:inline-block; }
        .status-ok{ background:#dcfce7; color:#166534; }

        @media print{ .no-print{ display:none !important; } #report{ position:relative; display:block; } }
    </style>
</head>
<body>

<div class="sidebar no-print" id="ui-sidebar">
    <h2 style="color:var(--red); text-align:center; margin-bottom:20px; font-weight:900;">Ù…Ø­Ø±Ùƒ MOTIVITY AI</h2>
    
    <div class="box">
        <h3>ğŸ“ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
        <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³Ø§Ø­Ø©</label>
        <select id="area_type" onchange="draw()">
            <option value="parking">Ù…ÙˆØ§Ù‚Ù Ø³ÙŠØ§Ø±Ø§Øª ÙƒØ¨Ø±Ù‰</option>
            <option value="walkway">Ù…Ù…Ø´Ù‰ Ø¹Ø§Ù…</option>
            <option value="plaza">Ø³Ø§Ø­Ø© Ù…ÙØªÙˆØ­Ø©</option>
        </select>
        <label>Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ù…ØªØ±)</label>
        <input type="number" id="site_len" value="150" oninput="draw()">
        <label>Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ¨ (Ù…ØªØ±)</label>
        <input type="number" id="mnt_height" value="4" oninput="draw()">
    </div>

    <div class="box">
        <h3>ğŸ”Š Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
        <label>Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­</label>
        <select id="spk_model" onchange="draw()">
            <option value="SM-8T">SM-8T (Ù‚Ø¯Ø±Ø© Ø¹Ø§Ù„ÙŠØ© 80 ÙˆØ§Ø·)</option>
            <option value="SM-5T">SM-5T (Ù…Ø¯Ù…Ø¬ 40 ÙˆØ§Ø·)</option>
        </select>
        <label>ÙƒÙ…ÙŠØ© Ø§Ù„ÙˆØ­Ø¯Ø§Øª</label>
        <input type="number" id="spk_qty" value="12" oninput="draw()">
        <label>Ù†Ù…Ø· Ø§Ù„ØªØ±ÙƒÙŠØ¨</label>
        <select id="mnt_type" onchange="draw()">
            <option value="pole">Ø¹Ù…ÙˆØ¯ Ø¥Ù†Ø§Ø±Ø© (360Â°)</option>
            <option value="wall">ØªØ«Ø¨ÙŠØª Ø¬Ø¯Ø§Ø±ÙŠ (120Â°)</option>
        </select>
    </div>

    <button class="btn btn-smart" onclick="applySmartAI()">âœ¨ ØªØ·Ø¨ÙŠÙ‚ ØªÙ†Ø¨Ø¤ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</button>
    <button class="btn btn-report" onclick="generateReport()">ğŸ“„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙÙ†ÙŠ</button>
    <button class="btn btn-reset" onclick="resetData()">ğŸ”„ ØªØµÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
</div>

<div class="main no-print">
    <canvas id="mainCanvas"></canvas>
    <div style="color:#666; font-size:11px; margin-top:10px;">* Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ø¶ØºØ· Ø§Ù„ØµÙˆØªÙŠ Ø§Ù„Ù…Ø³ØªÙ…Ø± (Continuous SPL)</div>
</div>

<div id="report">
    <div class="report-inner">
        <div class="no-print" style="margin-bottom:20px">
            <button onclick="closeReport()" style="padding:8px 15px; cursor:pointer;">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
            <button onclick="window.print()" style="padding:8px 15px; cursor:pointer; background:var(--red); color:#fff; border:none; border-radius:4px; font-family:'Cairo';">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ± PDF</button>
        </div>

        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h1 style="color:var(--red)">ØªØµÙ…ÙŠÙ… ØµÙˆØªÙŠ Ù…Ø¹ØªÙ…Ø¯</h1>
            <div style="text-align:left; font-size:12px; color:#666;">Ø±Ù‚Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: MOT-2026-OUT</div>
        </div>
        
        <hr style="margin:20px 0; border:0; border-top:2px solid #eee;">
        
        <div id="status_msg"></div>

        <div class="kpi-grid" id="kpi_data"></div>

        <table class="tech-table">
            <thead>
                <tr><th>Ø§Ù„Ù…ÙˆØ§ØµÙØ© Ø§Ù„ÙÙ†ÙŠØ©</th><th>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø­Ø³ÙˆØ¨Ø©</th><th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù‡Ù†Ø¯Ø³ÙŠØ©</th></tr>
            </thead>
            <tbody id="table_body"></tbody>
        </table>

        <h3>Ù…Ø®Ø·Ø· Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ (Ù…Ù†Ø¸ÙˆØ± Ø¹Ù„ÙˆÙŠ):</h3>
        <img id="report_img" style="width:100%; border:1px solid #eee; border-radius:10px; margin-top:10px;">
    </div>
</div>

<script>
    const canvas = document.getElementById('mainCanvas');
    const ctx = canvas.getContext('2d');

    function resetData() {
        if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒØ§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ©ØŸ")) {
            document.getElementById('site_len').value = 150;
            document.getElementById('spk_qty').value = 12;
            document.getElementById('mnt_height').value = 4;
            document.getElementById('area_type').selectedIndex = 0;
            document.getElementById('spk_model').selectedIndex = 0;
            document.getElementById('mnt_type').selectedIndex = 0;
            draw();
        }
    }

    function draw() {
        canvas.width = 1200; canvas.height = 700;
        ctx.fillStyle = "#0a0a0a"; ctx.fillRect(0,0,1200,700);
        const L = parseInt(document.getElementById('site_len').value);
        const qty = parseInt(document.getElementById('spk_qty').value);
        const mnt = document.getElementById('mnt_type').value;
        const spacing = (canvas.width - 200) / (qty - 1 || 1);

        for(let i=0; i<qty; i++) {
            let x = 100 + (i * spacing);
            let y = 350;
            let radius = 180;
            let grad = ctx.createRadialGradient(x, y, 0, x, y, radius);
            grad.addColorStop(0, 'rgba(56, 189, 248, 0.4)');
            grad.addColorStop(1, 'rgba(230, 0, 18, 0)');
            ctx.fillStyle = grad;
            ctx.beginPath();
            mnt === "wall" ? ctx.arc(x, y, radius, 0, Math.PI) : ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = mnt === "pole" ? "#444" : "#1c1c1c";
            mnt === "pole" ? ctx.fillRect(x-4, y-200, 8, 500) : ctx.fillRect(x-15, y-250, 30, 550);
            ctx.fillStyle = mnt === "pole" ? "#38bdf8" : "#e60012";
            mnt === "pole" ? (ctx.beginPath(), ctx.arc(x, y, 15, 0, Math.PI*2), ctx.fill()) : ctx.fillRect(x-20, y-10, 40, 40);
        }
    }

    function applySmartAI() {
        const L = parseInt(document.getElementById('site_len').value);
        const type = document.getElementById('area_type').value;
        document.getElementById('spk_model').value = type === "parking" ? "SM-8T" : "SM-5T";
        document.getElementById('spk_qty').value = Math.ceil(L / (type === "parking" ? 12 : 15));
        draw();
    }

    function generateReport() {
        const qty = parseInt(document.getElementById('spk_qty').value);
        const watt = document.getElementById('spk_model').value === "SM-8T" ? 80 : 40;
        const totalW = qty * watt;
        const ampW = Math.ceil((totalW * 1.25) / 10) * 10;
        const spacing = (parseInt(document.getElementById('site_len').value) / qty).toFixed(1);

        document.getElementById('status_msg').innerHTML = `<div class="status-badge status-ok">ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØµÙ…ÙŠÙ… Ù‡Ù†Ø¯Ø³ÙŠØ§Ù‹</div>`;
        document.getElementById('kpi_data').innerHTML = `
            <div class="kpi-card"><h4>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ù…Ù„</h4><span>${totalW} ÙˆØ§Ø·</span></div>
            <div class="kpi-card"><h4>Ø§Ù„Ø£Ù…Ø¨Ù„ÙŠÙØ§ÙŠØ± Ø§Ù„Ø£Ø¯Ù†Ù‰</h4><span>${ampW} ÙˆØ§Ø·</span></div>
            <div class="kpi-card"><h4>ØªØ¨Ø§Ø¹Ø¯ Ø§Ù„Ø³Ù…Ø§Ø¹Ø§Øª</h4><span>${spacing} Ù…</span></div>
            <div class="kpi-card"><h4>SPL (1 Ù…ØªØ±)</h4><span>${watt===80?96:92} Ø¯ÙŠØ³ÙŠØ¨Ù„</span></div>
        `;
        document.getElementById('table_body').innerHTML = `
            <tr><td>Ø§Ù„Ù…Ø­ÙˆÙ„ (Transformer)</td><td>70V / 100V</td><td>Ø¯Ø¹Ù… Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø·ÙˆÙŠÙ„Ø©</td></tr>
            <tr><td>Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ø­Ù…Ø§ÙŠØ©</td><td>IP65 Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ù…Ø§Ø¡</td><td>Ù…Ø¹ØªÙ…Ø¯ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</td></tr>
            <tr><td>ØªØºØ·ÙŠØ© Ø§Ù„Ø§Ù†ØªØ´Ø§Ø±</td><td>${document.getElementById('mnt_type').value==='pole'?'360 Ø¯Ø±Ø¬Ø©':'120 Ø¯Ø±Ø¬Ø©'}</td><td>ØªØºØ·ÙŠØ© Ù…Ø®ØµØµØ© Ù„Ù„Ù…ÙˆÙ‚Ø¹</td></tr>
        `;
        document.getElementById('report_img').src = canvas.toDataURL();
        document.getElementById('report').style.display = "block";
        document.getElementById('ui-sidebar').style.display = "none";
        window.scrollTo(0,0);
    }

    function closeReport() { document.getElementById('report').style.display = "none"; document.getElementById('ui-sidebar').style.display = "block"; }
    window.onload = draw;
</script>
</body>
</html>